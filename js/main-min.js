KudosPlease=(function(){function a(b){this.elements=document.querySelectorAll(b.el);this.status=b.status;this.persistent=b.persistent!=undefined?(b.persistent&&window.localStorage!=undefined):true;this.duration=b.duration;this.timer={};for(var c=0;c<this.elements.length;c++){var d=this.elements[c];d.setAttribute("data-id",c);this.request(d,"GET",this);if(this.loadAmount(c,this)==0){d.setAttribute("data-amount",0);this.timer[c]=-1;if(this.isTouch()){this.on(d,"touchstart",this.enter);this.on(d,"touchend",this.out)}else{this.on(d,"mouseover",this.enter);this.on(d,"mouseout",this.out)}}else{this.finish(d,false,this)}}return this}a.prototype.enter=function(c,b,f){var d=-1;if(!f.hasClass(b,"finish")){f.addClass(b,"active");d=setTimeout(function(){f.removeClass(b,"active");f.finish(b,true,f)},f.duration);f.timer[b.getAttribute("data-id")]=d}};a.prototype.out=function(c,b,d){if(!d.hasClass(b,"finish")){d.removeClass(b,"active");clearTimeout(d.timer[b.getAttribute("data-id")])}};a.prototype.finish=function(b,d,c){c.addClass(b,"finish");c.changeStatus(b,"gamma",c);d=d||false;amount=c.loadAmount(parseInt(b.getAttribute("data-id"),10),c);if(d){++amount;c.request(b,"POST",c)}};a.prototype.changeStatus=function(b,c,d){if(d.status!=undefined){if(b.getAttribute("data-status")!=undefined){d.removeClass(b,d.status[b.getAttribute("data-status")])}d.addClass(b,d.status[c]);b.setAttribute("data-status",c)}};a.prototype.on=function(c,f,d){var b=this;try{c.addEventListener(f,function(h){d(h,c,b)},false)}catch(g){c.attachEvent("on"+f,function(h){d(h,c,b)})}};a.prototype.addClass=function(d,c){c=c.split(",");for(var b=0;b<c.length;b++){if(d.className.indexOf(c[b])==-1){d.className=d.className.trim()+" "+c[b]}}};a.prototype.removeClass=function(d,c){c=c.split(",");for(var b=0;b<c.length;b++){d.className=d.className.replace(c[b],"").trim()}};a.prototype.hasClass=function(f,e){var d=f.className.split(" "),b=false;for(var c=0;c<d.length;c++){if(d[c]==e){b=true}}return b};a.prototype.isTouch=function(){return !!("ontouchstart" in window)||!!("onmsgesturechange" in window)};a.prototype.save=function(c,b,d){if(d.persistent){window.localStorage.setItem("kudos:saved:"+c.getAttribute("data-url"),b)}};a.prototype.loadAmount=function(d,c){var b=c.elements[d].getAttribute("data-amount")||0;if(c.persistent){if((amount=window.localStorage.getItem("kudos:saved:"+c.elements[d].getAttribute("data-url")))!=undefined){b=amount}}return b};a.prototype.request=function(d,c,i){var h,g=i;try{h=new ActiveXObject("Microsoft.XMLHTTP")}catch(f){h=new XMLHttpRequest()}h.onreadystatechange=function(){if(h.readyState==4&&h.status==200){var e=h.responseText;d.setAttribute("data-amount",e);if(c=="GET"){g.changeStatus(d,e==0?"alpha":"beta",g);if(g.persistent&&window.localStorage.getItem("kudos:saved:"+d.getAttribute("data-url"))!=null){g.changeStatus(d,"gamma",g)}}if(c=="POST"){g.save(d,e,g)}}};var b="?url="+encodeURIComponent(d.getAttribute("data-url"));h.open(c,"http://api.kudosplease.com/"+b,true);h.send()};"".trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});return a})();function r(a){/in/.test(document.readyState)?setTimeout("r("+a+")",9):a()}r(function(){new KudosPlease({el:".kudos--default",duration:1500,status:{alpha:"fontelico-emo-shoot",beta:"fontelico-emo-shoot",gamma:"fontelico-emo-beer"}});new KudosPlease({el:".kudos--persistent",duration:1500,persistent:false,status:{alpha:"",beta:"",gamma:"fontelico-emo-sunglasses"}})});(function(){var c=/\blang(?:uage)?-(?!\*)(\w+)\b/i,a=self.Prism={util:{type:function(f){return Object.prototype.toString.call(f).match(/\[object (\w+)\]/)[1]},clone:function(h){var j=a.util.type(h);switch(j){case"Object":var g={};for(var f in h){h.hasOwnProperty(f)&&(g[f]=a.util.clone(h[f]))}return g;case"Array":return h.slice()}return h}},languages:{extend:function(h,j){var g=a.util.clone(a.languages[h]);for(var f in j){g[f]=j[f]}return g},insertBefore:function(l,p,k,h){h=h||a.languages;var j=h[l],m={};for(var g in j){if(j.hasOwnProperty(g)){if(g==p){for(var f in k){k.hasOwnProperty(f)&&(m[f]=k[f])}}m[g]=j[g]}}return h[l]=m},DFS:function(g,h){for(var f in g){h.call(g,f,g[f]);a.util.type(g)==="Object"&&a.languages.DFS(g[f],h)}}},highlightAll:function(j,k){var h=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');for(var f=0,g;g=h[f++];){a.highlightElement(g,j===!0,k)}},highlightElement:function(e,j,q){var g,p,n=e;while(n&&!c.test(n.className)){n=n.parentNode}if(n){g=(n.className.match(c)||[,""])[1];p=a.languages[g]}if(!p){return}e.className=e.className.replace(c,"").replace(/\s+/g," ")+" language-"+g;n=e.parentNode;/pre/i.test(n.nodeName)&&(n.className=n.className.replace(c,"").replace(/\s+/g," ")+" language-"+g);var k=e.textContent;if(!k){return}k=k.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var h={element:e,language:g,grammar:p,code:k};a.hooks.run("before-highlight",h);if(j&&self.Worker){var m=new Worker(a.filename);m.onmessage=function(f){h.highlightedCode=d.stringify(JSON.parse(f.data));h.element.innerHTML=h.highlightedCode;q&&q.call(h.element);a.hooks.run("after-highlight",h)};m.postMessage(JSON.stringify({language:h.language,code:h.code}))}else{h.highlightedCode=a.highlight(h.code,h.grammar);h.element.innerHTML=h.highlightedCode;q&&q.call(e);a.hooks.run("after-highlight",h)}},highlight:function(g,f){return d.stringify(a.tokenize(g,f))},tokenize:function(H,A){var w=a.Token,D=[H],t=A.rest;if(t){for(var z in t){A[z]=t[z]}delete A.rest}H:for(var z in A){if(!A.hasOwnProperty(z)||!A[z]){continue}var q=A[z],L=q.inside,G=!!q.lookbehind||0;q=q.pattern||q;for(var C=0;C<D.length;C++){var J=D[C];if(D.length>H.length){break H}if(J instanceof w){continue}q.lastIndex=0;var E=q.exec(J);if(E){G&&(G=E[1].length);var x=E.index-1+G,E=E[0].slice(G),I=E.length,k=x+I,B=J.slice(0,x+1),F=J.slice(k+1),j=[C,1];B&&j.push(B);var K=new w(z,L?a.tokenize(E,L):E);j.push(K);F&&j.push(F);Array.prototype.splice.apply(D,j)}}}return D},hooks:{all:{},add:function(g,h){var f=a.hooks.all;f[g]=f[g]||[];f[g].push(h)},run:function(j,k){var h=a.hooks.all[j];if(!h||!h.length){return}for(var f=0,g;g=h[f++];){g(k)}}}},d=a.Token=function(g,f){this.type=g;this.content=f};d.stringify=function(j){if(typeof j=="string"){return j}if(Object.prototype.toString.call(j)=="[object Array]"){return j.map(d.stringify).join("")}var h={type:j.type,content:d.stringify(j.content),tag:"span",classes:["token",j.type],attributes:{}};h.type=="comment"&&(h.attributes.spellcheck="true");a.hooks.run("wrap",h);var f="";for(var g in h.attributes){f+=g+'="'+(h.attributes[g]||"")+'"'}return"<"+h.tag+' class="'+h.classes.join(" ")+'" '+f+">"+h.content+"</"+h.tag+">"};if(!self.document){self.addEventListener("message",function(h){var j=JSON.parse(h.data),g=j.language,f=j.code;self.postMessage(JSON.stringify(a.tokenize(f,a.languages[g])));self.close()},!1);return}var b=document.getElementsByTagName("script");b=b[b.length-1];if(b){a.filename=b.src;document.addEventListener&&!b.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",a.highlightAll)}})();Prism.languages.markup={comment:/&lt;!--[\w\W]*?--(&gt;|&gt;)/g,prolog:/&lt;\?.+?\?&gt;/,doctype:/&lt;!DOCTYPE.+?&gt;/,cdata:/&lt;!\[CDATA\[[\w\W]+?]]&gt;/i,tag:{pattern:/&lt;\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?&gt;/gi,inside:{tag:{pattern:/^&lt;\/?[\w:-]+/i,inside:{punctuation:/^&lt;\/?/,namespace:/^[\w-]+?:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,inside:{punctuation:/=|&gt;|"/g}},punctuation:/\/?&gt;/g,"attr-name":{pattern:/[\w:-]+/g,inside:{namespace:/^[\w-]+?:/}}}},entity:/&amp;#?[\da-z]{1,8};/gi};Prism.hooks.add("wrap",function(a){a.type==="entity"&&(a.attributes.title=a.content.replace(/&amp;/,"&"))});Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:/@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,property:/(\b|\B)[a-z-]+(?=\s*:)/ig,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g};Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});Prism.languages.clike={comment:{pattern:/(^|[^\\])(\/\*[\w\W]*?\*\/|[^:]\/\/.*?(\r?\n|$))/g,lookbehind:!0},string:/("|')(\\?.)*?\1/g,keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,"boolean":/\b(true|false)\b/g,number:/\b-?(0x)?\d*\.?[\da-f]+\b/g,operator:/[-+]{1,2}|!|=?&lt;|=?&gt;|={1,2}|(&amp;){1,2}|\|?\||\?|\*|\//g,ignore:/&(lt|gt|amp);/gi,punctuation:/[{}[\];(),.:]/g};Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,number:/\b(-?(0x)?\d*\.?[\da-f]+|NaN|-?Infinity)\b/g});Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,lookbehind:!0}});Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/script(>|&gt;)/ig,inside:{tag:{pattern:/(&lt;|<)script[\w\W]*?(>|&gt;)|(&lt;|<)\/script(>|&gt;)/ig,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.javascript}}});